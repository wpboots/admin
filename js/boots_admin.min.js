/**
 * Admin - javascript
 *
 * @package Boots
 * @subpackage Admin
 * @version 1.0.1
 * @license GPLv2
 *
 * Boots - The missing WordPress framework. http://wpboots.com
 *
 * Copyright (C) <2014>  <M. Kamal Khan>
 *
 * This program is free software; you can redistribute it and/or
 * modify it under the terms of the GNU General Public License
 * as published by the Free Software Foundation; either version 2
 * of the License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program; if not, write to the Free Software
 * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
 *
 */
 !function(o){"use strict";var t={menu_slug:boots_admin.menu_slug,action_save_options:boots_admin.action_save_options,nonce_save_options:boots_admin.nonce_save_options,action_restore_options:boots_admin.action_restore_options,nonce_restore_options:boots_admin.nonce_restore_options,layout:null,grid_options:{rowSpacing:63,colSpacing:42,initSpacing:42,responsive:!0,hiddenClass:"boots-admin_hidden",columns:{defaults:3,800:2,500:1},onReady:function(t){t.show(),o("select",t).select2("destroy").select2({width:"element"});var e=o("input.powerange",t),n=e.parent(),i=e.next(".range-bar"),a=o(".range-quantity",i),s=o(".range-handle",i),r=o(".range-min",i),c=o(".range-max",i),d=s.width(),l=parseFloat(e.val()),m=(parseFloat(r.text()),parseFloat(c.text())),u=n.width()-r.width()-c.width()-20,_=u/(m/l)-d/2;i.width(u),a.width(_),s.css("left",(0>_?0:_)+"px"),r.css("left",-1*r.width()-10),c.css("right",-1*c.width()-10),o(".iris",t).iris("option","width",t.find(".boots-form-input").width())}},init:function(t){var e=this;e.elem=t,e.$elem=o(t),e.which_layout(),e.render_layout(),e.refresh_grid(),e.default_tab(),e.ev_tabs(),e.save_options(),e.restore_options()},which_layout:function(){var t=this;t.layout=o(".boots-form",t.$elem).hasClass("awesome-grid")?"grid":"default"},render_layout:function(){var t=this;"grid"==t.layout&&(o(".boots-form > ul > li",t.$elem).hide(),o(window).load(function(){o(".boots-form > ul.active",t.$elem).AwesomeGrid(t.grid_options)}))},refresh_grid:function(){var t=this;"grid"==t.layout&&(o("a.wp-color-result",t.$elem).on("click",function(){o(".boots-form > ul.active",t.$elem).AwesomeGrid(t.grid_options)}),o(".boots-form > ul.active > li .boots-form-input",t.$elem).on("resize",function(){o(".boots-form > ul.active",t.$elem).AwesomeGrid(t.grid_options)}))},switch_tab:function(t){var e=this,n=t.parent(),i=t.attr("href").split("#")[1];if(!t.hasClass("nav-tab-active")){o("a",n).removeClass("nav-tab-active"),t.addClass("nav-tab-active");var a=o('.boots-admin-body ul[data-as="section"]',e.$elem).stop(!0,!0).hide().removeClass("active");o.each(a,function(t,n){o(n).data("section")&&o(n).data("section")==i&&(o(n).stop(!0,!0).addClass("active").fadeIn("fast",function(){"grid"==e.layout&&o(n).AwesomeGrid(e.grid_options)}),window.location.hash=i)})}return!1},default_tab:function(){var t=this;if(window,window.location.hash){var e=window.location.hash,n=o('.boots-admin-header > h2 a[href="'+e+'"]',t.$elem);n&&t.switch_tab(n)}},ev_tabs:function(){var t=this;o(".boots-admin-header > h2 a.nav-tab",t.$elem).on("click",function(){return t.switch_tab(o(this))})},ajax:function(t,e,n,i){var a=this,s=t.parent(),r=o(".boots-admin-icon",s);getUserSetting("editor")&&"undefined"!=typeof tinymce&&null!=tinymce&&o(".boots-form-input textarea.wp-editor-area").each(function(){tinymce.execCommand("mceRemoveEditor",!1,o(this).attr("id")),tinymce.execCommand("mceAddEditor",!1,o(this).attr("id"))});var c=o('form[name="boots_admin_form"]',a.$elem).serialize();c+="&_menu="+a.menu_slug,o.BootsAjax({data:c,action:e,nonce:n,beforeSend:function(){r.addClass("boots-admin-icon-spinner")},done:function(o){o.error||r.removeClass("boots-admin-icon-spinner").addClass("boots-admin-icon-tick")},always:function(){setTimeout(function(){r.removeClass("boots-admin-icon-spinner").removeClass("boots-admin-icon-cross").removeClass("boots-admin-icon-tick")},800),i&&location.reload()}})},save_options:function(){var t=this;o("a.js-save-all",t.$elem).on("click",function(e){e.preventDefault(),t.ajax(o(this),t.action_save_options,t.nonce_save_options)})},restore_options:function(){var t=this;o("a.js-restore-all",t.$elem).on("click",function(t){t.preventDefault(),o("#boots_admin_restore_lb").modal({fadeDuration:200,zIndex:999999})}),o("a.js-restore-all-ok",t.$elem).on("click",function(e){e.preventDefault(),t.ajax(o("a.js-restore-all",t.$elem),t.action_restore_options,t.nonce_restore_options,!0)})}};o(document).ready(function(){t.init(".boots-admin")})}(jQuery);
