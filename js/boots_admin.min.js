/**
 * Admin - javascript
 *
 * @package Boots
 * @subpackage Admin
 * @version 1.0.0
 * @license GPLv2
 *
 * Boots - The missing WordPress framework. http://wpboots.com
 *
 * Copyright (C) <2014>  <M. Kamal Khan>
 *
 * This program is free software; you can redistribute it and/or
 * modify it under the terms of the GNU General Public License
 * as published by the Free Software Foundation; either version 2
 * of the License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program; if not, write to the Free Software
 * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
 *
 */
(function(b){var a={menu_slug:boots_admin.menu_slug,action_save_options:boots_admin.action_save_options,nonce_save_options:boots_admin.nonce_save_options,layout:null,grid_options:{rowSpacing:63,colSpacing:42,initSpacing:42,responsive:true,hiddenClass:"boots-admin_hidden",columns:{defaults:3,"800":2,"500":1},onReady:function(c){c.show();b("select",c).select2("destroy").select2({width:"element"});b(".iris",c).iris("option","width",c.width())}},init:function(d){var c=this;c.elem=d;c.$elem=b(d);c.which_layout();c.render_layout();c.default_tab();c.ev_tabs();c.save_options()},which_layout:function(){var c=this;if(b(".boots-form",c.$elem).hasClass("awesome-grid")){c.layout="grid"}else{c.layout="default"}},render_layout:function(){var c=this;if(c.layout=="grid"){b(".boots-form > ul li",c.$elem).hide();b(window).load(function(){b(".boots-form > ul.active",c.$elem).AwesomeGrid(c.grid_options)})}},switch_tab:function(d){var c=this;var g=d.parent();var f=d.attr("href").split("#")[1];if(!d.hasClass("nav-tab-active")){b("a",g).removeClass("nav-tab-active");d.addClass("nav-tab-active");var e=b('.boots-admin-body ul[data-as="section"]',c.$elem).stop(true,true).hide().removeClass("active");b.each(e,function(i,h){if(b(h).data("section")){if(b(h).data("section")==f){b(h).stop(true,true).addClass("active").fadeIn("fast",function(){if(c.layout=="grid"){b(h).AwesomeGrid(c.grid_options)}});window.location.hash=f}}})}return false},default_tab:function(){var c=this;window;if(window.location.hash){var d=window.location.hash;var e=b('.boots-admin-header > h2 a[href="'+d+'"]',c.$elem);if(e){c.switch_tab(e)}}},ev_tabs:function(){var c=this;b(".boots-admin-header > h2 a",c.$elem).on("click",function(){if(!b(this).hasClass("js-save-all")){return c.switch_tab(b(this))}})},save_options:function(){var c=this;b("a.js-save-all",c.$elem).on("click",function(){var f=b(this);var g=f.parent();var d=b(".boots-admin-icon",g);if(getUserSetting("editor")){if(tinymce){b(".boots-form-tinymce textarea.wp-editor-area").each(function(h){tinymce.execCommand("mceRemoveEditor",false,b(this).attr("id"));tinymce.execCommand("mceAddEditor",false,b(this).attr("id"))})}}var e=b('form[name="boots_admin_form"]',c.$elem).serialize();e+=("&_menu="+c.menu_slug);b.BootsAjax({data:e,action:c.action_save_options,nonce:c.nonce_save_options,beforeSend:function(){d.addClass("boots-admin-icon-spinner")},done:function(h){if(!h.error){d.removeClass("boots-admin-icon-spinner").addClass("boots-admin-icon-tick")}},always:function(){setTimeout(function(){d.removeClass("boots-admin-icon-spinner").removeClass("boots-admin-icon-cross").removeClass("boots-admin-icon-tick")},800)}});return false})}};b(document).ready(function(){a.init(".boots-admin")})})(jQuery);